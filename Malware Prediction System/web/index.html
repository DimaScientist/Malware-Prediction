<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Malware Predictor</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="eel.js"></script>
  </head>
  <body>
      <div class="buttons-help">
          <div><button type="button" onclick="openAbout()">Справка</button></div>
          <div><button type="button" onclick="SaveTemplate()">Загрузить шаблон</button></div>
      </div>
      <div class="project-name">Malware Predictor</div>
      <div class="user-panel">
          <label>Укажите путь к csv-файлу</label>
          <input id="filepath">
          <button id="predict" type="button" onclick="Predict()">Предсказать</button>
        </div>
        <div class="result">
            <div><label>Результат:</label></div>
            <textarea id="text_result" readonly></textarea>
            <button type="button" onclick="SaveResult()">Сохранить</button>
        </div>

        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
               <h2>Справочная информация</h2>
              <p class="name-system">Автоматизированная система предсказания вредоносности ПО</p>
              <p class="engineer">Разработал:<br>студент группы 6415-020302D<br>Баканов Д.С.</p>
              <p>Для того чтобы узнать результат необходимо:</p>
              <ol>
                <li>Ввевсти в поле путь к файлу формата-CSV</li>
                <li>Нажать на кнопку "Предсказать"</li>
                <li>Если захотите сохранить результата, то нажмите на кнопку "Сохранить"</li>
              </ol>
              <p>Для того, что бы узнать, какие метрики необходимы, нажмите на кнопку "Загрузить шаблон"</p>
              <p>Для ознакомления с примерным содержимым файла-CSV перейдите в директорию examples и выберете файл example.csv</p>
          </div>
        
        </div>
      </div>
  </body>
  <script>
    var modal = document.getElementById('myModal');

    function openAbout(){
        modal.style.display = "block";
    }
    function closeModal(){
       modal.style.display = "none";
    }

    window.onclick = function(event) {
       if (event.target == modal) {
         closeModal();
        }
    }

    async function Predict() {
      let filepath = document.getElementById("filepath").value;
      let text_result = document.getElementById("text_result");
      let answer = await eel.predict(filepath)();
      console.log(answer)
      text_result.innerHTML = answer
    }

    async function SaveTemplate() {
      await eel.save_template();
    }

    async function SaveResult() {
      let text_result = document.getElementById("text_result").value;
      if(text_result) {
        let filepath = document.getElementById("filepath").value;
        await eel.save_results(filepath);
      }
      else {
        alert('Нажмите "Предсказать"')
      }
    }

    eel.expose(ShowMessage)
    function ShowMessage(message) {
      alert(message)
    }
  </script>
</html>
